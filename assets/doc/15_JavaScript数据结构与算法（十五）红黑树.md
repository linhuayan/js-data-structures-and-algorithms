### 红黑树的规则  
- 红黑树，除了符合二叉搜索树的基本规则外，还添加了一些特性：  

#### 红黑树的特性
- 节点是红色或黑色。
- 根节点是黑色。
- 每个叶子节点都是黑色的空节点（NIL节点）。
- 每个红色节点的两个子节点都是黑色。（从每个叶子到根的所有路径上不能有两个连续的红色节点）
- 从任一节点到其每个叶子的所有路径都包含相同数目的黑色节点。  

#### 红黑树的相对平衡  
前面的约束，确保了红黑树的关键特性：
- 从根到叶子的最长可能路径，不会超过最短可能路径的两倍长。
- 结果就是这个树基本是平衡的。
- 虽然没有做到绝对的平衡，但是可以保证在最坏的情况下，依然是高效的。  

为什么可以做到最长路径不超过最短路径的两倍呢？  
- 性质4决定了路径不能有两个相连的红色节点。  
- 最短的可能路径都是黑色节点。  
- 最长的可能路径是红色和黑色交替。  
- 性质5所有路径都有相同数目的黑色节点。  
- 这就表明了没有路径能多余任何其他路径的两倍长。  

网友推论：  
1. 假设某一路径只有黑色节点n个，没有红色节点，该路径长为n，根据特性5，其他每个路径上也只有n个黑色节点加红色节点。  
2. 根据特性2和特性3，头尾两个节点是黑色，根据特性4，路径上红色节点不会连续出现，所以红色节点会黑色节点交替出现，红色节点最多有n-1个。  
3. 所以此时最短路径为只有黑色的路径，长度为n，最长路径为红黑交替的路径，长度为n+n-1=2n-1，于是最长路径不会超过最短路径2倍。  

